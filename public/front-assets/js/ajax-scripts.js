function saveForm(t){let e=$(t).data("form-id");$("#"+e).submit(function(t){t.preventDefault()});let a=$("#"+e),o=new FormData(a[0]);$(a)&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({method:"POST",url:$(a).attr("action"),data:o,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(t){a.find("label.error").remove(),1==t.status?($(".error-input").removeClass("error-input"),Notiflix.Notify.Success(t.message,{position:"center-top",timeout:4e3}),setTimeout(function(){null!=t.redirect&&(window.location.href=t.redirect)},4e3),a.find("input[type=text],input[type=email], input[type=password], input[type=date], textarea").val(""),$("#agree").prop("checked",!1)):null!=t.messages?($.each(t.messages,function(t,e){"agree"==t?a.find("[name='"+t+"']").parent().find(".aggreement-checkbox").addClass("error-input"):(a.find("[name='"+t+"']").addClass("error-input"),a.find("[name='"+t+"']").after('<label class="error '+t+'" for="'+t+'"><strong>'+e+"</strong></label>"))}),setTimeout(function(){$(".error-input").removeClass("error-input"),a.find("label.error").remove()},5e3)):Notiflix.Notify.Failure(t.message,{position:"center-top",timeout:4e3})}}))}function diffSumCart(t){let e="/"+$("html").attr("lang")+"/diffSumItems/goods",a=t.attr("data-id"),o=t.attr("data-page"),n=t.val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{id:a,page:o,number:n},success:function(e){1==e.status&&("main-page"==e.page||(t.parent().parent().parent().find(".price-f-row span").html(parseInt(e.total_item_price)),$(".final-price span").html(parseInt(e.total_price))))}})}function newOrder(t){$("html").attr("lang");let e=$(this).data("form-id");$("#"+e).submit(function(t){t.preventDefault()});let a=$("#"+t),o=a.find("select, textarea, input, radio").serializeArray();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:$(a).attr("action"),data:o,enctype:"multipart/form-data",success:function(t){a.find("label.error").remove(),1==t.status?(getRecaptcha("/cart","recaptcha-form-new-order"),Notiflix.Notify.Success(t.message,{position:"center-top",timeout:5e3}),setTimeout(function(){null!=t.redirect&&(window.location.href=t.redirect)},5e3)):null!=t.messages&&($.each(t.messages,function(t,e){"agree"==t?a.find("[name='"+t+"']").parent().find(".aggreement-checkbox").addClass("error-input"):(a.find("[name='"+t+"']").addClass("error-input"),a.find("[name='"+t+"']").after('<label class="error '+t+'" for="'+t+'"><strong>'+e+"</strong></label>"))}),setTimeout(function(){$(".error-input").removeClass("error-input"),a.find("label.error").fadeOut()},6e3))}})}function filterForm(t){let e=$(t).data("form-id");$("#"+e).submit(function(t){t.preventDefault()}),$('[data-type="ckeditor"]').each(function(t,e){$(this).val(CKEDITOR.instances.body.getData())});let a=$("#"+$(t).data("form-id")),o=$(a).find("select, textarea, input").serializeArray();o.push({name:"data-parent",value:a.attr("data-parent")}),$(a)&&$.ajax({method:"POST",url:$(a).attr("action"),beforeSend:function(){$(".render-block").hide(),$(".loader").fadeIn(500)},data:o,success:function(t){if(1==t.status){let e=window.location.protocol+"//"+window.location.host+window.location.pathname+t.messages;window.history.pushState({path:e},"",e),$(".render-block").html(t.view),setTimeout(function(){$(".loader").hide(),$(".render-block").fadeIn(500)},500)}else{let t=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.pushState({path:t},"",t)}},error:function(){$(".sk-double-bounce").fadeOut(500)}})}function changeSort(t,e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({method:"POST",url:"/ajaxSortPage",beforeSend:function(){$(".sk-cube-grid").fadeIn()},data:{type:t,sorting:e},success:function(t){$(".sk-cube-grid").fadeOut(),1==t.status&&location.reload()},error:function(){location.reload()}})}function calcThis(t){let e=$(t).data("form-id");$("#"+e).submit(function(t){t.preventDefault()});let a=$("#"+e),o=new FormData(a[0]);$(a)&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({method:"POST",url:$(a).attr("action"),data:o,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(t){a.find("label.error").remove(),1==t.status?($(".error-input").removeClass("error-input"),$(".result").html(t.result),$(".result").addClass("active"),$([document.documentElement,document.body]).animate({scrollTop:$(".anchor").offset().top},500),setTimeout(function(){$(".result").removeClass("active")},3e3)):t.messages},error:function(t){$(".info-alert").fadeIn(),$(".info-alert").addClass("active"),setTimeout(function(){$(".info-alert").fadeOut(),$(".info-alert").removeClass("active")},4e3)}}))}$(document).ready(function(){$(document).on("click",".add-to-basket, .product-end-add-to-basket",function(t){t.preventDefault();let e="/"+$("html").attr("lang")+"/cartElements/goods",a=$(this).data("id"),o=$(this).parent().find("input").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{id:a,number:o},success:function(t){1==t.status&&($(".num-cart").html(t.basket_count),Notiflix.Notify.Success(t.message,{position:"center-top",timeout:4e3}))}})})}),$(document).on("click",".count-minus, .count-plus",function(t){t.preventDefault(),diffSumCart($(this).parent().parent().find("input"))}),$(".basket-item-quantity").on("change",function(t){t.preventDefault(),diffSumCart($(this))}),$(".basket-remove").on("click",function(t){t.preventDefault();let e=$(this),a="/"+$("html").attr("lang")+"/destroyCartElements/goods",o=$(this).attr("data-id");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:a,data:{id:o},success:function(t){1==t.status&&(t.basket_count>0?(e.parent().parent().parent().remove(),$(".num-cart , .final-items-col span").html(t.basket_count),$(".final-price span").html(parseInt(t.total_price)),Notiflix.Notify.Failure(t.message,{position:"center-top",timeout:4e3})):($(".cart-btn").removeClass("full"),Notiflix.Notify.Failure(t.message,{position:"center-top",timeout:4e3}),setTimeout(function(){location.reload()},4e3)))}})}),$(".send-bth").on("click",function(){event.preventDefault(),newOrder($(this).data("form-id"))}),$(".filter input, .filter select").on("change",function(){filterForm($(this).parents("#filter-data").get(0))}),$(".slider-price").on("change",function(){filterForm($(this).parents("#filter-data").get(0))}),$(".add-to-fav-it, .product-end-add-to-wish").on("click",function(){let t=$(this).attr("data-id"),e="/"+$("html").attr("lang")+"/favAdd";$(this);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{id:t},success:function(t){1==t.status&&($(".header-wish-count").html(t.wish_item),0==t.wish_item&&($(".wish-"+goods_id).removeClass("active"),$(".wish-"+goods_id).attr("data-wish",0)))}})}),$(".remove-wish-item").on("click",function(){let t=$(this).attr("data-id"),e="/"+$("html").attr("lang")+"/destroyItemWish",a=$(this);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{goods_id:t},success:function(t){1==t.status&&($(a).closest(".special-item").remove(),$(".main-ttl-on-page span").html(t.wish_count),0==t.wish_count&&document.location.reload())}})}),$(document).on("click",".add-to-compare, .product-end-add-to-compare",function(){let t=$(this).attr("data-goods-id"),e=$(this).attr("data-goods-subject-id"),a="/"+$("html").attr("lang")+"/compareElements/goods";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:a,data:{goods_id:t,goods_subject_id:e},success:function(e){1==e.status&&($(".header-compare-count").html(e.compare_count),$(".header-compare-items").html(e.header_compare_items_view),0==e.compare_item?(Notiflix.Notify.Success(e.message,{position:"center-top",timeout:2e3}),$(".compare-"+t).removeClass("bg-gray-700 text-white"),$(".compare-"+t).addClass("bg-gray-100 hover:bg-gray-700 hover:text-white"),$(".compare-"+t).attr("data-compare",0)):(Notiflix.Notify.Success(e.message,{position:"center-top",timeout:2e3}),$(".compare-"+t).addClass("bg-gray-700 text-white"),$(".compare-"+t).removeClass("bg-gray-100 hover:bg-gray-700 hover:text-white"),$(".compare-"+t).attr("data-compare",1)))}})}),$(document).on("click",".remove-compare-item",function(){let t=$(this).attr("data-goods-id"),e="/"+$("html").attr("lang")+"/destroyCompareElements/goods";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{goods_id:t},success:function(t){1==t.status&&(t.compare_count,$(".header-compare-count").html(t.compare_count),$(".header-compare-items").html(t.header_compare_items_view),Notiflix.Notify.Success(t.message,{position:"center-top",timeout:2e3}),setTimeout(function(){location.reload()},2e3))}})}),$(document).on("click",".remove_all_compare_items",function(t){t.preventDefault();let e="/"+$("html").attr("lang")+"/destroyAllCompareItems/goods",a="",o=window.location.pathname.split("/");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,success:function(t){$(".header-compare-items").html(t.header_empty_compare_view),$(".header-compare-count").html(t.compare_count),o.length>2&&"compare-list"===(a=o[2])&&setTimeout(function(){location.reload()},1e3)}})}),$(".block-with-av-sort a").on("click",function(t){t.preventDefault(),changeSort($(this).data("type"),$(this).data("filt-value"))}),$(document).ready(function(){$(document).on("click",".createPdf",function(t){t.preventDefault();let e="/"+$("html").attr("lang")+"/createPdf",a=$(this).data("id");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{id:a},success:function(t){1==t.status&&($(".num-cart").html(t.basket_count),Notiflix.Notify.Success(t.message,{position:"center-top",timeout:4e3}))}})})});let search_time=0;$(".search-form input").on("keyup",function(){clearTimeout(search_time);let t=$(this).val();search_time=setTimeout(function(){if(t.length>0){$(".smart-search").fadeIn();let e="/"+$("html").attr("lang")+"/smartSearchFun";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({type:"POST",url:e,data:{value:t},success:function(t){1==t.status&&t.view&&($(".search-result").html(t.view),$(".search-result").fadeIn(),$(".loading-search").fadeOut())}})}else $(".loading-search").fadeIn(),$(".search-result").fadeOut()},300)});